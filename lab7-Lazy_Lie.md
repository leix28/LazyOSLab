# Lab7 report

## [练习一]
**内核级信号量的设计描述，并说其大致执行流流程。**

- ucore中的信号量是利用禁用中断来实现的，仅适用于单核单CPU使用。
- 其结构中主要包含２个变量：一个是信号量计数，另一个是在此信号量上等待的进程队列。
- 进程申请临界区资源时，先检查信号量是否大于０，若是，则计数减一后直接返回；否则将自己加入等待该信号量的等待队列，等待其他进程释放资源后将自己唤醒。
- 信号量上升时，检查是否有等待资源的进程，若有则唤醒，否则计数加一。

**用户态进程/线程提供信号量机制的设计方案，并比较说明给内核级提供信号量机制的异同。**

- 用户态进程应当通过库函数来完成信号量的功能
- 库函数可以通过系统调用在内核态操作信号量
- 主要区别在于，用户态无法禁用中断，因此会涉及到状态切换的操作

## [练习二]
**内核级条件变量的设计描述，并说其大致执行流流程。**

- ucore中的信号量机制通过wait和signal两个函数实现
- wait函数用于在信号量为0时睡眠等待资源
- signal用于在释放资源时唤醒其他等待的程序

执行流程

- 进程检查禁用中断，检查信号量，若资源可用，信号量减一，开启中断
- 若资源不可用，开启中断，进入等待列表
- 当进程释放资源，信号量加一，唤醒等待的进程

**给用户态进程/线程提供条件变量机制的设计方案，并比较说明给内核级提供条件变量机制的异同。**

- 添加相关库函数供用户进程调用